<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.s1.common.holdingcompany.dao.HoldingCompanyMapper" >
  <resultMap id="BaseResultMap" type="com.s1.common.holdingcompany.dao.HoldingCompany" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 28 12:53:18 IST 2013.
    -->
    <id column="BNKHLDGCMPKY" property="oid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="HLDGCMPID" property="id" jdbcType="VARCHAR" />
    <result column="HLDGCMPNAME" property="name" jdbcType="VARCHAR" />
    <result column="UPDATEDTTM" property="updateDateTime" jdbcType="TIMESTAMP" />
    <result column="UPDATEUSER" property="updateUser" jdbcType="VARCHAR" />
    <result column="VERSIONSTAMP" property="versionStamp" jdbcType="SMALLINT" />    
    <result column="CORORGKYFI" property="corOrgOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />    
    <result column="ARCPRINCIPALKY" property="principalOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />   
    <result column="BNKADPTVAUTHGRPKY" property="hcAAGroup" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="BNKAUTHTYPEKY" property="authenticationTypeOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />   
  </resultMap>
  
  <resultMap id="HoldingCompanySearchResultMap" type="com.s1.common.holdingcompany.HoldingCompanyView" >
    <id column="BNKHLDGCMPKY" property="objectId" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="HLDGCMPID" property="companyId" jdbcType="VARCHAR" />
    <result column="HLDGCMPNAME" property="companyName" jdbcType="VARCHAR" />
    <result column="CORORGKYFI" property="corOrgOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />    
    <result column="cnt" property="totalRowCount" jdbcType="INTEGER" />
  </resultMap>
  
    <resultMap id="subsidiaryLogo" type="com.s1.common.holdingcompany.dao.SubsidiaryLogo">
    <id column="BNKHLDGCMPCUSTOMERKY" jdbcType="INTEGER" property="oid" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="subsidiaryLogo" jdbcType="BLOB" property="logo" />
  </resultMap>


  <resultMap id="ConfigFeatureEnableMap" type="com.s1.common.holdingcompany.ConfigFeatureEnable" >
    <id column="ARCCONFIGURATIONKY" property="objectId" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="PROPERTYNAME" property="propertyName" jdbcType="VARCHAR" />
    <result column="PROPERTYVALUE" property="propertyValue" jdbcType="VARCHAR" />
    <result column="DOMAIN" property="domainValue" jdbcType="VARCHAR" />    
  </resultMap>
  
  <select id="getPropertyConfigValue" resultMap="ConfigFeatureEnableMap" parameterType="com.s1.common.holdingcompany.criteria.PropertyConfigCriteria">
   SELECT
         ARCCONFIGURATIONKY,
         PROPERTYNAME,            
         PROPERTYVALUE,
         DOMAIN
    FROM ARCCONFIGURATION
    WHERE 
        PROPERTYNAME = #{propertyName} and DOMAIN = #{domain}        
 </select>
  
  <select id="getSubsidiaries" resultMap="SubsidiariesMap">
   SELECT
         SUB.BNKCUSTOMERKY,
         SUB.CORORGKYFI,            
         SUB.CUSTOMERID,
         SUB.CUSTOMERNAME,
         SUB.ARCPRINCIPALKY,  
         SUB.CITY,
         SUB.ARCCOUNTRYCDKY,
         SUB.ISENROLLED
    FROM BNKHLDGCMPCUSTOMER HCS
        INNER JOIN BNKCUSTOMER SUB ON SUB.BNKCUSTOMERKY = HCS.BNKCUSTOMERKY
    WHERE 
        HCS.BNKHLDGCMPKY = #{hldgCompKy} and SUB.ISENROLLED = '1' 
        and SUB.CORORGKYFI IN
        <foreach collection="affiliateList" item="item" open="(" close=")" separator=",">
 	       	 #{item}
 	    </foreach>         
 </select>
 <select id="getHoldingCompanySubsidiariesCount" parameterType="com.s1.arch.utilities.ObjectId" resultType="java.lang.Integer" >
    select count(*)
    FROM BNKHLDGCMPCUSTOMER HCS
        INNER JOIN BNKCUSTOMER SUB ON SUB.BNKCUSTOMERKY = HCS.BNKCUSTOMERKY
    WHERE 
        HCS.BNKHLDGCMPKY = #{hldgCompKy} and SUB.ISENROLLED = '1' 
  </select>
 
 <select id="getHoldingCompanyUsers" resultMap="HoldingCompanyUserMap" parameterType="com.s1.arch.utilities.ObjectId">
    SELECT
            HCU.BNKHLDGCMPUSERKY,
            HCU.BNKHLDGCMPKY,
            HCU.ARCPRINCIPALKY as HCU_ARCPRINCIPALKY,
            HCU.ARCLOCALECDKY as HCU_ARCLOCALECDKY,
            HCU.GIVENNAME,
            HCU.MIDDLENAME,
            HCU.FAMILYNAME,
            HCU.SUFFIXENUM,
            HCU.PRIMARYPHONENBR,
            HCU.SECONDARYPHONENBR,            
            HCU.EMAILADDRESS,
            I.USERID,
            HCU.ISACTIVE,
            HCU.UPDATEDTTM,
            HCU.UPDATEUSER,
            HCU.VERSIONSTAMP,
            LINK.BNKHLDGCMPUSERUSERKY,
            LINK.APPROVALSTATUSCD,
            SUB.BNKCUSTOMERKY,
            SUB.CORORGKYFI            
    FROM BNKHLDGCMPUSER HCU        
         INNER JOIN ARCIDENTITY I ON HCU.ARCPRINCIPALKY =  I.ARCPRINCIPALKY         
         LEFT OUTER JOIN BNKHLDGCMPUSERUSER LINK ON HCU.BNKHLDGCMPUSERKY = LINK.BNKHLDGCMPUSERKY
         LEFT OUTER JOIN BNKCUSTOMER SUB ON LINK.BNKCUSTOMERKY = SUB.BNKCUSTOMERKY         
    WHERE         
        HCU.BNKHLDGCMPKY = #{id}         
 </select>
 
 <select id="getHoldingCompanyUserByUserId" resultMap="HoldingCompanyUserMap">
    SELECT
            HCU.BNKHLDGCMPUSERKY,
            HCU.BNKHLDGCMPKY,
            HCU.ARCPRINCIPALKY,
            HCU.ARCLOCALECDKY,
            HCU.GIVENNAME,
            HCU.MIDDLENAME,
            HCU.FAMILYNAME,
            HCU.SUFFIXENUM,
            HCU.PRIMARYPHONENBR,
            HCU.SECONDARYPHONENBR,
            HCU.EMAILADDRESS,
            I.USERID,
            HCU.ISACTIVE,
            HCU.UPDATEDTTM,
            HCU.UPDATEUSER,
            HCU.VERSIONSTAMP,
            LINK.BNKHLDGCMPUSERUSERKY,
            LINK.APPROVALSTATUSCD,
            SUB.BNKCUSTOMERKY,
            SUB.CORORGKYFI
    FROM BNKHLDGCMPUSER HCU        
         INNER JOIN ARCIDENTITY I ON HCU.ARCPRINCIPALKY =  I.ARCPRINCIPALKY         
         LEFT OUTER JOIN BNKHLDGCMPUSERUSER LINK ON HCU.BNKHLDGCMPUSERKY = LINK.BNKHLDGCMPUSERKY
         LEFT OUTER JOIN BNKCUSTOMER SUB ON LINK.BNKCUSTOMERKY = SUB.BNKCUSTOMERKY
    WHERE         
        I.USERID = #{userId,jdbcType=VARCHAR} 
        <if test="id!=null">
			AND HCU.BNKHLDGCMPKY = #{id}
        </if>
 </select>
 
 <select id="getHoldingCompanyByLoginId" resultMap="BaseResultMap" parameterType="java.lang.String">
  select 
   	hc.BNKHLDGCMPKY, hc.HLDGCMPID, hc.HLDGCMPNAME, hc.UPDATEDTTM, hc.UPDATEUSER, hc.VERSIONSTAMP, hc.CORORGKYFI, 
    hc.ARCPRINCIPALKY, hc.BNKADPTVAUTHGRPKY, hc.BNKAUTHTYPEKY
   from 
     BNKHldgCmp hc, BNKHldgCmpUser hcu, ARCIdentity i
      where 
        hc.BNKHldgCmpKy = hcu.BNKHldgCmpKy
        and 
        hcu.ARCPrincipalKy = i.ARCPrincipalKy
        and 
        i.userId = #{loginId}
 </select>
 
  <resultMap id="SubsidiariesMap" type="com.s1.common.customer.CustomerValueImpl" >    
       <id column="BNKCUSTOMERKY" property="objectId" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
       <result column="BNKOrgKy" property="orgOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
       <result column="ARCPRINCIPALKY" property="principalOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
       <result column="CORORGKYFI" property="affiliateOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
       <result column="CUSTOMERID" property="customerId" jdbcType="VARCHAR" />
       <result column="CUSTOMERNAME" property="customerName" jdbcType="VARCHAR" />
       <result column="CITY" property="address.city" jdbcType="VARCHAR" />
       <result column="ARCCOUNTRYCDKY" property="address.inlCountryOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />       
       <result column="ISENROLLED" property="isEnrolled" jdbcType="CHAR" typeHandler="com.s1.arch.ibatis.ZeroOneBooleanTypeHandler" />
  </resultMap>
  
  <resultMap id="LinkResultMap" type="com.s1.common.holdingcompany.dao.LinkedSubsidiaryUser" >    
    <result column="BNKHLDGCMPUSERUSERKY" property="linkOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />     
    <result column="APPROVALSTATUSCD" property="isApproved" jdbcType="CHAR" typeHandler="com.s1.arch.ibatis.ZeroOneBooleanTypeHandler" />    
    <association property="subsidiary" column="BNKCUSTOMERKY" javaType="com.s1.common.customer.CustomerValueImpl" resultMap="SubsidiariesMap"/>
  </resultMap>
  
  <resultMap id="HoldingCompanyUserMap" type="com.s1.common.holdingcompany.dao.HoldingCompanyUser" >   
    <id column="BNKHLDGCMPUSERKY" property="oid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="BNKHLDGCMPKY" property="holdingCompanyOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />    
    <result column="ARCPRINCIPALKY" property="principalOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="HCU_ARCPRINCIPALKY" property="principalOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="ARCLOCALECDKY" property="localeOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="HCU_ARCLOCALECDKY" property="localeOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="GIVENNAME" property="givenName" jdbcType="VARCHAR" />    
    <result column="MIDDLENAME" property="middleName" jdbcType="VARCHAR" />
    <result column="FAMILYNAME" property="familyName" jdbcType="VARCHAR" />    
    <result column="SUFFIXENUM" property="suffix" jdbcType="VARCHAR" />
    <result column="PRIMARYPHONENBR" property="primaryPhoneNumber" jdbcType="VARCHAR" />
    <result column="SECONDARYPHONENBR" property="secondaryPhoneNumber" jdbcType="VARCHAR" />    
    <result column="PRIMARYFAXNBR" property="primaryFaxNumber" jdbcType="VARCHAR" />
    <result column="EMAILADDRESS" property="emailAddress" jdbcType="VARCHAR" />    
    <result column="ISACTIVE" property="isActive" jdbcType="CHAR" typeHandler="com.s1.arch.ibatis.ZeroOneBooleanTypeHandler" />     
    <result column="UPDATEDTTM" property="updateDateTime" jdbcType="TIMESTAMP" />
    <result column="UPDATEUSER" property="updateUser" jdbcType="VARCHAR" />
    <result column="VERSIONSTAMP" property="versionStamp" jdbcType="SMALLINT" />
    <result column="USERID" property="userId" jdbcType="VARCHAR" />    
    <collection property="linkedSubsidiaryUsers" column="BNKHLDGCMPUSERUSERKY" ofType="com.s1.common.holdingcompany.dao.LinkedSubsidiaryUser" javaType="ArrayList" resultMap="LinkResultMap"/> 
  </resultMap>
  
  <sql id="Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 28 12:53:18 IST 2013.
    -->
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
            <foreach collection="criteria.oidCriteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler} and #{criterion.secondValue,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                  </foreach>
                </when>
              </choose>
            </foreach>
            <foreach collection="criteria.corOrgOidCriteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler} and #{criterion.secondValue,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                  </foreach>
                </when>
              </choose>
            </foreach>
            <foreach collection="criteria.principalOidCriteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler} and #{criterion.secondValue,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                  </foreach>
                </when>
              </choose>
            </foreach>
            <foreach collection="criteria.hcAAGroupCriteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler} and #{criterion.secondValue,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 28 12:53:18 IST 2013.
    -->
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
            <foreach collection="criteria.oidCriteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler} and #{criterion.secondValue,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                  </foreach>
                </when>
              </choose>
            </foreach>
            <foreach collection="criteria.corOrgOidCriteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler} and #{criterion.secondValue,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                  </foreach>
                </when>
              </choose>
            </foreach>
            <foreach collection="criteria.principalOidCriteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler} and #{criterion.secondValue,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                  </foreach>
                </when>
              </choose>
            </foreach>
            <foreach collection="criteria.hcAAGroupCriteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler} and #{criterion.secondValue,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 28 12:53:18 IST 2013.
    -->
    BNKHLDGCMPKY, HLDGCMPID, HLDGCMPNAME, UPDATEDTTM, UPDATEUSER, VERSIONSTAMP, CORORGKYFI, 
    ARCPRINCIPALKY,BNKADPTVAUTHGRPKY,BNKAUTHTYPEKY
  </sql>
  <select id="selectByExample" resultMap="BaseResultMap" parameterType="com.s1.common.holdingcompany.dao.HoldingCompanyExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 28 12:53:18 IST 2013.
    -->
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    from BNKHLDGCMP
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="com.s1.arch.utilities.ObjectId" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 28 12:53:18 IST 2013.
    -->
    select 
    <include refid="Base_Column_List" />
    from BNKHLDGCMP
    where BNKHLDGCMPKY = #{oid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
  </select>
  
 <select id="selectByAAGroupKey" resultMap="BaseResultMap" parameterType="com.s1.arch.utilities.ObjectId" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 28 12:53:18 IST 2013.
    -->
    select 
    <include refid="Base_Column_List" />
    from BNKHLDGCMP
    where BNKADPTVAUTHGRPKY = #{oid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
  </select>
  
  <delete id="deleteByPrimaryKey" parameterType="com.s1.arch.utilities.ObjectId" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 28 12:53:18 IST 2013.
    -->
    delete from BNKHLDGCMP
    where BNKHLDGCMPKY = #{oid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
  </delete>
  <delete id="deleteByExample" parameterType="com.s1.common.holdingcompany.dao.HoldingCompanyExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 28 12:53:18 IST 2013.
    -->
    delete from BNKHLDGCMP
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.s1.common.holdingcompany.dao.HoldingCompany" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 28 12:53:18 IST 2013.
    -->
    insert into BNKHLDGCMP (BNKHLDGCMPKY, 
      HLDGCMPID, HLDGCMPNAME, UPDATEDTTM, 
      UPDATEUSER, VERSIONSTAMP, CORORGKYFI, 
      ARCPRINCIPALKY,BNKADPTVAUTHGRPKY,BNKAUTHTYPEKY
      )
    values (#{oid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}, 
      #{id,jdbcType=VARCHAR}, #{name,jdbcType=VARCHAR}, #{updateDateTime,jdbcType=TIMESTAMP}, 
      #{updateUser,jdbcType=VARCHAR}, #{versionStamp,jdbcType=SMALLINT}, #{corOrgOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}, 
      #{principalOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      #{hcAAGroup,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      #{authenticationTypeOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}      
      )
  </insert>
  <insert id="insertSelective" parameterType="com.s1.common.holdingcompany.dao.HoldingCompany" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 28 12:53:18 IST 2013.
    -->
    insert into BNKHLDGCMP
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="oid != null" >
        BNKHLDGCMPKY,
      </if>
      <if test="id != null" >
        HLDGCMPID,
      </if>
      <if test="name != null" >
        HLDGCMPNAME,
      </if>
      <if test="updateDateTime != null" >
        UPDATEDTTM,
      </if>
      <if test="updateUser != null" >
        UPDATEUSER,
      </if>
      <if test="versionStamp != null" >
        VERSIONSTAMP,
      </if>
      <if test="corOrgOid != null" >
        CORORGKYFI,
      </if>
      <if test="principalOid != null" >
        ARCPRINCIPALKY,
      </if>
      <if test="hcAAGroup != null" >
        BNKADPTVAUTHGRPKY,
      </if>
      <if test="authenticationTypeOid != null" >
        BNKAUTHTYPEKY,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="oid != null" >
        #{oid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="id != null" >
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="name != null" >
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="updateDateTime != null" >
        #{updateDateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateUser != null" >
        #{updateUser,jdbcType=VARCHAR},
      </if>
      <if test="versionStamp != null" >
        #{versionStamp,jdbcType=SMALLINT},
      </if>
      <if test="corOrgOid != null" >
        #{corOrgOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="principalOid != null" >
        #{principalOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="hcAAGroup != null" >
        #{hcAAGroup,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.s1.common.holdingcompany.dao.HoldingCompanyExample" resultType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 28 12:53:18 IST 2013.
    -->
    select count(*) from BNKHLDGCMP
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 28 12:53:18 IST 2013.
    -->
    update BNKHLDGCMP
    <set >
      <if test="record.oid != null" >
        BNKHLDGCMPKY = #{record.oid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="record.id != null" >
        HLDGCMPID = #{record.id,jdbcType=VARCHAR},
      </if>
      <if test="record.name != null" >
        HLDGCMPNAME = #{record.name,jdbcType=VARCHAR},
      </if>
      <if test="record.updateDateTime != null" >
        UPDATEDTTM = #{record.updateDateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.updateUser != null" >
        UPDATEUSER = #{record.updateUser,jdbcType=VARCHAR},
      </if>
      <if test="record.versionStamp != null" >
        VERSIONSTAMP = #{record.versionStamp,jdbcType=SMALLINT},
      </if>
      <if test="record.corOrgOid != null" >
        CORORGKYFI = #{record.corOrgOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="record.principalOid != null" >
        ARCPRINCIPALKY = #{record.principalOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="record.hcAAGroup != null" >
        BNKADPTVAUTHGRPKY = #{record.hcAAGroup,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="record.authenticationTypeOid != null" >
        BNKAUTHTYPEKY = #{record.authenticationTypeOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
    </set>
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 28 12:53:18 IST 2013.
    -->
    update BNKHLDGCMP
    set BNKHLDGCMPKY = #{record.oid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      HLDGCMPID = #{record.id,jdbcType=VARCHAR},
      HLDGCMPNAME = #{record.name,jdbcType=VARCHAR},
      UPDATEDTTM = #{record.updateDateTime,jdbcType=TIMESTAMP},
      UPDATEUSER = #{record.updateUser,jdbcType=VARCHAR},
      VERSIONSTAMP = #{record.versionStamp,jdbcType=SMALLINT},
      CORORGKYFI = #{record.corOrgOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      ARCPRINCIPALKY = #{record.principalOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      BNKADPTVAUTHGRPKY = #{record.hcAAGroup,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      BNKAUTHTYPEKY = #{record.authenticationTypeOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.s1.common.holdingcompany.dao.HoldingCompany" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 28 12:53:18 IST 2013.
    -->
    update BNKHLDGCMP
    <set >
      <if test="id != null" >
        HLDGCMPID = #{id,jdbcType=VARCHAR},
      </if>
      <if test="name != null" >
        HLDGCMPNAME = #{name,jdbcType=VARCHAR},
      </if>
      <if test="updateDateTime != null" >
        UPDATEDTTM = #{updateDateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateUser != null" >
        UPDATEUSER = #{updateUser,jdbcType=VARCHAR},
      </if>
      <if test="versionStamp != null" >
        VERSIONSTAMP = #{versionStamp,jdbcType=SMALLINT},
      </if>
      <if test="corOrgOid != null" >
        CORORGKYFI = #{corOrgOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="principalOid != null" >
        ARCPRINCIPALKY = #{principalOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="hcAAGroup != null" >
        BNKADPTVAUTHGRPKY = #{hcAAGroup,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="authenticationTypeOid != null" >
        BNKAUTHTYPEKY = #{authenticationTypeOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
    </set>
    where BNKHLDGCMPKY = #{oid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.s1.common.holdingcompany.dao.HoldingCompany" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 28 12:53:18 IST 2013.
    -->
    update BNKHLDGCMP
    set HLDGCMPID = #{id,jdbcType=VARCHAR},
      HLDGCMPNAME = #{name,jdbcType=VARCHAR},
      UPDATEDTTM = #{updateDateTime,jdbcType=TIMESTAMP},
      UPDATEUSER = #{updateUser,jdbcType=VARCHAR},
      VERSIONSTAMP = #{versionStamp,jdbcType=SMALLINT},
      CORORGKYFI = #{corOrgOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      ARCPRINCIPALKY = #{principalOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      BNKADPTVAUTHGRPKY = #{hcAAGroup,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      BNKAUTHTYPEKY = #{authenticationTypeOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
    where BNKHLDGCMPKY = #{oid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
  </update>
  
  
  <resultMap id="CompanyResultMap" type="com.s1.common.holdingcompany.subsidiary.SubsidiarySummaryView">
    <id column="BNKCustomerKy" property="objectId" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="customerName" property="companyName" jdbcType="VARCHAR" />
    <result column="customerId" property="customerId" jdbcType="VARCHAR" />    
    <result column="taxId" property="taxId" jdbcType="VARCHAR" />
    <result column="city" property="city" jdbcType="VARCHAR" />
    <result column="ARCStateCdKy" property="region" jdbcType="SMALLINT" />    
    <result column="ARCCountryCdKy" property="country" jdbcType="SMALLINT" />    
    <result column="primaryPhoneNbr" property="phoneNumber1" jdbcType="VARCHAR" />
    <result column="F_Description" property="regionDesc" jdbcType="VARCHAR" />
    <result column="G_Description" property="countryDesc" jdbcType="VARCHAR" />    
    <result column="name" property="affiliateName" jdbcType="VARCHAR" />
    <result column="ClassOfSvcName" property="classOfSvcName" jdbcType="VARCHAR" />
    <result column="COROrgKy" property="corOrgKy" jdbcType="SMALLINT" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />    
    <result column="ISCOSCUSTOMIZED" property="iscustomCos" jdbcType="BOOLEAN" />    
    <result column="cnt" property="totalRowCount" jdbcType="INTEGER" />
  </resultMap>
  
  <select id="getCompanyListByCriteria" resultMap="CompanyResultMap" parameterType="com.s1.common.holdingcompany.criteria.CompanyCriteria">
  with a1(row_number,BNKCustomerKy, customerName, customerId, taxId, city,
       ARCStateCdKy, ARCCountryCdKy, primaryPhoneNbr, F_Description, G_Description,
       name, ClassOfSvcName, COROrgKy, ISCOSCUSTOMIZED) 
  as(<include refid="Base_Subsidiary_Select" />,
       A.BNKCustomerKy, A.customerName, A.customerId, A.taxId, A.city,
       A.ARCStateCdKy, A.ARCCountryCdKy, A.primaryPhoneNbr, F.Description as F_Description, G.Description as G_Description,
       Q.name, I.ClassOfSvcName, Q.COROrgKy, A.ISCOSCUSTOMIZED
       from COROrg Q, BNKClassOfSvc I,
       BNKCustomer A
       left outer join ARCStateCd F on F.ARCStateCdKy = A.ARCStateCdKy
       left outer join ARCCountryCd G on G.ARCCountryCdKy = A.ARCCountryCdKy
  where 
       I.BNKClassOfSvcKy = A.BNKClassOfSvcKy
       and Q.COROrgKy = A.COROrgKyFI
       and a.ISSUBSIDIARYCOMPANY = '0'
       and a.ISENROLLED = '1'
       <if test="customerName != null">
            and UPPER(A.customerName) = #{customerName}
       </if>
       <if test="customerNameWithWildCard != null">
            and UPPER(A.customerName) like #{customerNameWithWildCard}
       </if>
       <if test="customerId != null">
            and UPPER(A.customerId) = #{customerId}
       </if>
       <if test="customerIdWithWildCard != null">
            and UPPER(A.customerId) like #{customerIdWithWildCard}
       </if>
       <if test="cosOids != null">
            and A.BNKClassOfSvcKy in
            <foreach item="oid" collection="cosOids" open="(" close=")" separator=",">
                #{oid}
            </foreach>
       </if>
       <if test="affiliateOids != null">
            and A.COROrgKyFI in
            <foreach item="aff_oid" collection="affiliateOids" open="(" close=")" separator=",">
                #{aff_oid}
            </foreach>
       </if>
       and not exists (select 1 from BNKHldgCmpCustomer b
                   where A.BNKCustomerKy = b.BNKCustomerKy) <include refid="Base_Subsidiary_Sort-Order" /> 
       select b.cnt, a.row_number, a.* from a1 a, (select count(*) as cnt from a1) b where a.row_number between 
       <if test="fromRowNum != null">
            #{fromRowNum} and
       </if>
       <if test="toRowNum != null">
            #{toRowNum}
       </if>
  </select>
  
    <select id="selectSubLogo" parameterType="com.s1.arch.utilities.ObjectId" resultMap="subsidiaryLogo">
    select subsidiaryLogo
    from BNKHLDGCMPCUSTOMER
    where BNKCUSTOMERKY = #{oid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
	</select>
	
   <select id="getHoldingCompanyListByCriteria" resultMap="HoldingCompanySearchResultMap" parameterType="com.s1.common.holdingcompany.criteria.HoldingCompanyCriteria">
   with a1(row_number, BNKHLDGCMPKY, HLDGCMPNAME, HLDGCMPID, CORORGKYFI) 
  	as(<include refid="Base_HoldingCompany_Select" />,
       BNKHLDGCMPKY, HLDGCMPNAME, HLDGCMPID, CORORGKYFI
       from BNKHLDGCMP
  	where 
       <if test="customerName != null">
            UPPER(HLDGCMPNAME) = #{customerName}
       </if>
       <if test="customerNameWithWildCard != null">
            UPPER(HLDGCMPNAME) like #{customerNameWithWildCard}
       </if>
       <if test="customerId != null">
            UPPER(HLDGCMPID) = #{customerId}
       </if>
       <if test="customerIdWithWildCard != null">
            UPPER(HLDGCMPID) like #{customerIdWithWildCard}
       </if>
       ) select b.cnt, a.row_number, a.* from a1 a, (select count(*) as cnt from a1) b where a.row_number between 
       <if test="fromRowNum != null">
            #{fromRowNum} and
       </if>
       <if test="toRowNum != null">
            #{toRowNum}
       </if>
  </select>
  
  <select id="getAllHoldingCompanyListByCriteria" resultMap="HoldingCompanySearchResultMap" parameterType="com.s1.common.holdingcompany.criteria.HoldingCompanyCriteria">
    SELECT
       BNKHLDGCMPKY, HLDGCMPNAME, HLDGCMPID, CORORGKYFI
       from BNKHLDGCMP
  	where 
       <if test="customerName != null">
            UPPER(HLDGCMPNAME) = #{customerName}
       </if>
       <if test="customerNameWithWildCard != null">
            UPPER(HLDGCMPNAME) like #{customerNameWithWildCard}
       </if>
       <if test="customerId != null">
            UPPER(HLDGCMPID) = #{customerId}
       </if>
       <if test="customerIdWithWildCard != null">
            UPPER(HLDGCMPID) like #{customerIdWithWildCard}
       </if>       
       ORDER BY HLDGCMPNAME
  </select>
  
  <sql id="Base_HoldingCompany_Select" >
        select row_number() over( 
        <include refid="Base_HoldingCompany_Sort-Order" />
        as row_number 
  </sql>
       
   <sql id="Base_HoldingCompany_Sort-Order" >
     <if test="orderby != null">
		<if test="orderby == 'companyName'">
		    order by LOWER(HLDGCMPNAME)
		</if>
		<if test="orderby == 'companyId'">
		   order by LOWER(HLDGCMPID)
		</if>
      </if>
      <if test="order != null">
        <if test="order == 'asc'">
            ASC )
        </if>
        <if test="order == 'dsc'">
             DESC )
        </if>
      </if>
   </sql>
        
  <sql id="Base_Subsidiary_Select" >
        select row_number() over(
        <include refid="Base_Subsidiary_Sort-Order" />
        as row_number 
  </sql>
       
  <sql id="Base_Subsidiary_Sort-Order" >
     <if test="orderby != null">
		<if test="orderby == 'companyName'">
		    order by A.customerName
		</if>
		<if test="orderby == 'customerId'">
		   order by A.customerId
		</if>
		<if test="orderby == 'phoneNumber1'">
		   order by A.primaryPhoneNbr
		</if>
        <if test="orderby == 'city'">
           order by A.city
        </if>
        <if test="orderby == 'regionDesc'">
           order by F.Description
        </if>
        <if test="orderby == 'countryDesc'">
           order by G.Description
        </if>
        <if test="orderby == 'classOfSvcName'">
           order by I.ClassOfSvcName
        </if>
        <if test="orderby == 'affiliateName'">
           order by Q.name
        </if> 
      </if>
      <if test="order != null">
        <if test="order == 'asc'">
            ASC )
        </if>
        <if test="order == 'dsc'">
             DESC )
        </if>
        <if test="order == 'desc'">
             DESC )
        </if>
      </if>
   </sql>
   
   
  <delete id="deleteHCompanyPrincipalDataByprincipalOid" parameterType="com.s1.arch.utilities.ObjectId" >
    delete from ARCPrincipal WHERE ARCPrincipalKy = #{principalOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
  </delete>
  
  <delete id="deleteHCompanyAuditRptRecord" parameterType="com.s1.arch.utilities.ObjectId" >
    delete from BNKHldgCmpAuditRpt WHERE BNKHldgCmpKy = #{oid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
  </delete>
      
</mapper>