<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.s1.common.transact.dao.LoanAccountTransactionMapper" >
  <resultMap id="BaseResultMap" type="com.s1.common.transact.model.LoanAccountTransaction" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 23 12:07:28 EST 2014.
    -->
    <id column="BNKLOANAcctTRNKY" property="oid" jdbcType="BIGINT" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="BNKTRNTYPEKY" property="bnkTrnTypeOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="BNKACCTKY" property="bnkAcctOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="BNKAcctNoteKy" property="acctLoneNoteOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="BNKCommitmentKy" property="acctLoneCommitmentOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="BNKSubCommitmentKy" property="acctLoneSubCommitmentOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="POSTEDDTTM" property="postedDateTime" jdbcType="TIMESTAMP" />
    <result column="USERORIGINDTTM" property="userOriginDateTime" jdbcType="TIMESTAMP" />
    <result column="MEMO" property="memo" jdbcType="VARCHAR" />
    <result column="PAYEEANNOTATION" property="payeeAnnotation" jdbcType="VARCHAR" />
    <result column="TRNAMOUNT" property="amount" jdbcType="DECIMAL" />
    <result column="SERVERID" property="serverId" jdbcType="VARCHAR" />
    <result column="SICCODE" property="sicCode" jdbcType="VARCHAR" />
    <result column="VALUEDT" property="valueDate" jdbcType="DATE" />
    <result column="FITRNREFERENCE" property="fiTrnReference" jdbcType="VARCHAR" />
    <result column="TRNCODE" property="trnCode" jdbcType="VARCHAR" />
    <result column="STATUS" property="status" jdbcType="SMALLINT" />
    <result column="CUSTTRNREF" property="custTrnRef" jdbcType="VARCHAR" />
    <result column="ORIGAMOUNT" property="origAmount" jdbcType="DECIMAL" />
    <result column="UPDATEDTTM" property="updateDateTime" jdbcType="TIMESTAMP" />
    <result column="UPDATEUSER" property="updateUser" jdbcType="VARCHAR" />
    <result column="VERSIONSTAMP" property="versionStamp" jdbcType="SMALLINT" />
    <result column="DAYFLOATAMT0" property="dayFloatAmt0" jdbcType="DECIMAL" />
    <result column="DAYFLOATAMT1" property="dayFloatAmt1" jdbcType="DECIMAL" />
    <result column="DAYFLOATAMT2" property="dayFloatAmt2" jdbcType="DECIMAL" />
    <result column="ARCISOCURRENCYCDKYTRN" property="isoCurrencyCdOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="ARCISOCURRENCYCDKYORIG" property="origCrncyCdOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="BNKPRODSUBTYPEKY" property="bnkProdSubTypeOid" jdbcType="INTEGER" typeHandler="com.s1.arch.ibatis.ObjectIdTypeHandler" />
    <result column="SUPPLEMENTARYDET" property="supplementaryDet" jdbcType="VARCHAR" />
    <result column="UPDTBALAMOUNT" property="updatedBalAmount" jdbcType="DECIMAL" />
    <result column="ARCISOCURRENCYCDKYUPBA" property="updtBalIsoCurrencyCdOid" jdbcType="VARCHAR" />
    <result column="ADDITIONALREF" property="additionalRef" jdbcType="VARCHAR" />
    <result column="POSTEDDTTM__" property="postedDateTime" jdbcType="DATE" />
    <result column="ISMEMOTRN" property="isMemoTrn" jdbcType="CHAR" typeHandler="com.s1.arch.ibatis.ZeroOneBooleanTypeHandler" />
  </resultMap>
  <insert id="insert" parameterType="com.s1.common.transact.model.LoanAccountTransaction" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 03 12:07:28 EST 2013.
    -->
    insert into BNKLOANAcctTRN (BNKLOANAcctTRNKY, 
      BNKTRNTYPEKY, 
      BNKACCTKY, 
      POSTEDDTTM, USERORIGINDTTM, 
      MEMO, PAYEEANNOTATION, ORIGAMOUNT, TRNAMOUNT,
      SERVERID, SICCODE, VALUEDT, 
      FITRNREFERENCE, TRNCODE, STATUS, 
      CUSTTRNREF, UPDATEDTTM, 
      UPDATEUSER, VERSIONSTAMP, DAYFLOATAMT0, 
      DAYFLOATAMT1, DAYFLOATAMT2, ARCISOCURRENCYCDKYTrn, 
      ARCISOCURRENCYCDKYORIG, 
      BNKPRODSUBTYPEKY,SUPPLEMENTARYDET,
      UPDTBALAMOUNT, ARCISOCURRENCYCDKYUPBA, ADDITIONALREF, ISMEMOTRN, BNKAcctNoteKy,BNKCommitmentKy,BNKSubCommitmentKy)
    values (#{oid,jdbcType=BIGINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}, 
      #{bnkTrnTypeOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}, 
      #{bnkAcctOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}, 
      #{postedDateTime,jdbcType=TIMESTAMP}, #{userOriginDateTime,jdbcType=TIMESTAMP}, 
      #{memo,jdbcType=VARCHAR}, #{payeeAnnotation,jdbcType=VARCHAR}, #{origAmount,jdbcType=DECIMAL}, #{amount,jdbcType=DECIMAL},
      #{serverId,jdbcType=VARCHAR}, #{sicCode,jdbcType=VARCHAR}, #{valueDate,jdbcType=DATE}, 
      #{fiTrnReference,jdbcType=VARCHAR}, #{trnCode,jdbcType=VARCHAR}, #{status,jdbcType=SMALLINT}, 
      #{custTrnRef,jdbcType=VARCHAR}, #{updateDateTime,jdbcType=TIMESTAMP}, 
      #{updateUser,jdbcType=VARCHAR}, #{versionStamp,jdbcType=SMALLINT}, #{dayFloatAmt0,jdbcType=DECIMAL}, 
      #{dayFloatAmt1,jdbcType=DECIMAL}, #{dayFloatAmt2,jdbcType=DECIMAL}, #{isoCurrencyCdOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}, 
      #{origCrncyCdOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}, 
      #{bnkProdSubTypeOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}, 
      #{supplementaryDet,jdbcType=VARCHAR},
      #{updatedBalAmount,jdbcType=DECIMAL},
      #{updtBalIsoCurrencyCdOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      #{additionalRef,jdbcType=VARCHAR},
      #{isMemoTrn,jdbcType=CHAR,typeHandler=com.s1.arch.ibatis.ZeroOneBooleanTypeHandler},
      #{acctLoneNoteOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      #{acctLoneCommitmentOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      #{acctLoneSubCommitmentOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler})
  </insert>
  <insert id="insertSelective" parameterType="com.s1.common.transact.model.LoanAccountTransaction" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 03 12:07:28 EST 2013.
    -->
    insert into BNKLOANAcctTRN
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="oid != null" >
        BNKLOANAcctTRNKY,
      </if>
      <if test="bnkTrnTypeOid != null" >
        BNKTRNTYPEKY,
      </if>
      <if test="bnkAcctOid != null" >
        BNKACCTKY,
      </if>
      <if test="postedDateTime != null" >
        POSTEDDTTM,
      </if>
      <if test="userOriginDateTime != null" >
        USERORIGINDTTM,
      </if>
      <if test="memo != null" >
        MEMO,
      </if>
      <if test="payeeAnnotation != null" >
        PAYEEANNOTATION,
      </if>
      <if test="amount != null" >
        trnAMOUNT,
      </if>
      <if test="serverId != null" >
        SERVERID,
      </if>
      <if test="sicCode != null" >
        SICCODE,
      </if>
      <if test="valueDate != null" >
        VALUEDT,
      </if>
      <if test="fiTrnReference != null" >
        FITRNREFERENCE,
      </if>
      <if test="trnCode != null" >
        TRNCODE,
      </if>
      <if test="status != null" >
        STATUS,
      </if>
      <if test="custTrnRef != null" >
        CUSTTRNREF,
      </if>
      <if test="origAmount != null" >
        origAMOUNT,
      </if>
      <if test="updateDateTime != null" >
        UPDATEDTTM,
      </if>
      <if test="updateUser != null" >
        UPDATEUSER,
      </if>
      <if test="versionStamp != null" >
        VERSIONSTAMP,
      </if>
      <if test="dayFloatAmt0 != null" >
        DAYFLOATAMT0,
      </if>
      <if test="dayFloatAmt1 != null" >
        DAYFLOATAMT1,
      </if>
      <if test="dayFloatAmt2 != null" >
        DAYFLOATAMT2,
      </if>
      <if test="isoCurrencyCdOid != null" >
        ISOCURRENCYCDKY,
      </if>
      <if test="origCrncyCdOid != null" >
        ARCISOCURRENCYCDKYTrn,
      </if>
      <if test="bnkProdSubTypeOid != null" >
        BNKPRODSUBTYPEKY,
      </if>
      <if test="supplementaryDet != null" >
        SUPPLEMENTARYDET,
      </if>
      <if test="updatedBalAmount != null" >
        UPDTBALAMOUNT,
      </if>
      <if test="updtBalIsoCurrencyCdOid != null" >
        ARCISOCURRENCYCDKYUPBA,
      </if>
      <if test="additionalRef != null" >
        ADDITIONALREF,
      </if>
      <if test="isMemoTrn != null" >
        ISMEMOTRN,
      </if>
      <if test="acctLoneNoteOid != null" >
        BNKAcctNoteKy,
      </if>
      <if test="acctLoneCommitmentOid != null" >
        BNKCommitmentKy,
      </if>
      <if test="acctLoneSubCommitmentOid != null" >
        BNKSubCommitmentKy,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="oid != null" >
        #{oid,jdbcType=BIGINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="bnkTrnTypeOid != null" >
        #{bnkTrnTypeOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="bnkAcctOid != null" >
        #{bnkAcctOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="postedDateTime != null" >
        #{postedDateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="userOriginDateTime != null" >
        #{userOriginDateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="memo != null" >
        #{memo,jdbcType=VARCHAR},
      </if>
      <if test="payeeAnnotation != null" >
        #{payeeAnnotation,jdbcType=VARCHAR},
      </if>
      <if test="amount != null" >
        #{amount,jdbcType=DECIMAL},
      </if>
      <if test="serverId != null" >
        #{serverId,jdbcType=VARCHAR},
      </if>
      <if test="sicCode != null" >
        #{sicCode,jdbcType=VARCHAR},
      </if>
      <if test="valueDate != null" >
        #{valueDate,jdbcType=DATE},
      </if>
      <if test="fiTrnReference != null" >
        #{fiTrnReference,jdbcType=VARCHAR},
      </if>
      <if test="trnCode != null" >
        #{trnCode,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        #{status,jdbcType=SMALLINT},
      </if>
      <if test="custTrnRef != null" >
        #{custTrnRef,jdbcType=VARCHAR},
      </if>
      <if test="origAmount != null" >
        #{origAmount,jdbcType=DECIMAL},
      </if>
      <if test="updateDateTime != null" >
        #{updateDateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateUser != null" >
        #{updateUser,jdbcType=VARCHAR},
      </if>
      <if test="versionStamp != null" >
        #{versionStamp,jdbcType=SMALLINT},
      </if>
      <if test="dayFloatAmt0 != null" >
        #{dayFloatAmt0,jdbcType=DECIMAL},
      </if>
      <if test="dayFloatAmt1 != null" >
        #{dayFloatAmt1,jdbcType=DECIMAL},
      </if>
      <if test="dayFloatAmt2 != null" >
        #{dayFloatAmt2,jdbcType=DECIMAL},
      </if>
      <if test="isoCurrencyCdOid != null" >
        #{isoCurrencyCdOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="origCrncyCdOid != null" >
        #{origCrncyCdOid,jdbcType=SMALLINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="bnkProdSubTypeOid != null" >
        #{bnkProdSubTypeOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="supplementaryDet != null" >
        #{supplementaryDet,jdbcType=VARCHAR},
      </if>
      <if test="updatedBalAmount != null" >
        #{updatedBalAmount,jdbcType=DECIMAL},
      </if>
      <if test="updtBalIsoCurrencyCdOid != null" >
        #{updtBalIsoCurrencyCdOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="additionalRef != null" >
        #{additionalRef,jdbcType=VARCHAR},
      </if>
      <if test="isMemoTrn != null" >
        #{isMemoTrn,jdbcType=CHAR,typeHandler=com.s1.arch.ibatis.ZeroOneBooleanTypeHandler},
      </if>
      <if test="acctLoneNoteOid != null" >
        #{acctLoneNoteOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="acctLoneCommitmentOid != null" >
        #{acctLoneCommitmentOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
      <if test="acctLoneSubCommitmentOid != null" >
        #{acctLoneSubCommitmentOid,jdbcType=INTEGER,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler},
      </if>
    </trim>
  </insert>
  
  <select id="countByCriteria" parameterType="com.s1.common.transact.model.LoanAccountTransactionCriteria" resultType="java.lang.Integer" >
    select count(*) from BNKLOANAcctTRN 
    	where
    <if test="loanAccountCriteria.accountOid != null" >
      BNKACCTKY = #{loanAccountCriteria.accountOid,jdbcType=BIGINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
    </if>
    <if test="loanAccountCriteria.fromDate != null" >
		AND BNKLOANAcctTRN.POSTEDDTTM <![CDATA[ >= ]]> #{loanAccountCriteria.fromDate,jdbcType=TIMESTAMP}
  	</if>
  	<if test="loanAccountCriteria.toDate != null" >
		AND BNKLOANAcctTRN.POSTEDDTTM <![CDATA[ <= ]]> #{loanAccountCriteria.toDate,jdbcType=TIMESTAMP}
  	</if>
  	<if test="loanAccountCriteria.isPDorCD != null" >
        AND BNKLOANAcctTRN.ISMEMOTRN = #{loanAccountCriteria.isCDData,jdbcType=CHAR,typeHandler=com.s1.arch.ibatis.ZeroOneBooleanTypeHandler}
    </if>
    <if test="loanAccountCriteria.accNoteKy != null" >
        AND BNKLOANAcctTRN.bnkacctnoteky = #{loanAccountCriteria.accNoteKy,jdbcType=BIGINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
    </if>
    <if test="loanAccountCriteria.accCommitmentKy != null" >
        AND BNKLOANAcctTRN.BNKCommitmentKy = #{loanAccountCriteria.accCommitmentKy,jdbcType=BIGINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
    </if>
    <if test="loanAccountCriteria.accSubCommitmentKy != null" >
        AND BNKLOANAcctTRN.BNKSubCommitmentKy = #{loanAccountCriteria.accSubCommitmentKy,jdbcType=BIGINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
    </if>      
    <if test="loanAccountCriteria.acctTransOnly == true" >
        AND BNKLOANAcctTRN.bnkacctnoteky IS NULL AND BNKLOANAcctTRN.BNKCommitmentKy IS NULL AND BNKLOANAcctTRN.BNKSubCommitmentKy IS NULL  
    </if>    

  </select>
  <delete id="deleteByCriteria" parameterType="com.s1.common.transact.model.LoanAccountTransactionCriteria" >
    delete from BNKLOANAcctTRN 
    	where
    <if test="loanAccountCriteria.accountOid != null" >
      BNKACCTKY = #{loanAccountCriteria.accountOid,jdbcType=BIGINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
    </if>
    <if test="loanAccountCriteria.fromDate != null" >
		AND BNKLOANAcctTRN.POSTEDDTTM <![CDATA[ >= ]]> #{loanAccountCriteria.fromDate,jdbcType=TIMESTAMP}
  	</if>
  	<if test="loanAccountCriteria.toDate != null" >
		AND BNKLOANAcctTRN.POSTEDDTTM <![CDATA[ <= ]]> #{loanAccountCriteria.toDate,jdbcType=TIMESTAMP}
  	</if>
  	<if test="loanAccountCriteria.isPDorCD != null" >
        AND BNKLOANAcctTRN.ISMEMOTRN = #{loanAccountCriteria.isCDData,jdbcType=CHAR,typeHandler=com.s1.arch.ibatis.ZeroOneBooleanTypeHandler}
    </if>
    <if test="loanAccountCriteria.accNoteKy != null" >
        AND BNKLOANAcctTRN.bnkacctnoteky = #{loanAccountCriteria.accNoteKy,jdbcType=BIGINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
    </if>
    <if test="loanAccountCriteria.accCommitmentKy != null" >
        AND BNKLOANAcctTRN.BNKCommitmentKy = #{loanAccountCriteria.accCommitmentKy,jdbcType=BIGINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
    </if>
    <if test="loanAccountCriteria.accSubCommitmentKy != null" >
        AND BNKLOANAcctTRN.BNKSubCommitmentKy = #{loanAccountCriteria.accSubCommitmentKy,jdbcType=BIGINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
    </if>    
    
    <if test="loanAccountCriteria.acctTransOnly == true" >
        AND BNKLOANAcctTRN.bnkacctnoteky IS NULL AND BNKLOANAcctTRN.BNKCommitmentKy IS NULL AND BNKLOANAcctTRN.BNKSubCommitmentKy IS NULL 
    </if>
    
  </delete>
  
   <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 18 11:43:06 IST 2014.
    -->
    BNKLOANACCTTRNKY, ARCISOCURRENCYCDKYTRN, ARCISOCURRENCYCDKYORIG, ARCISOCURRENCYCDKYUPBA, 
    BNKPRODSUBTYPEKY, BNKTRNTYPEKY, BNKACCTKY, BNKACCTNOTEKY, POSTEDDTTM, USERORIGINDTTM, 
    MEMO, PAYEEANNOTATION, TRNAMOUNT, SERVERID, SICCODE, VALUEDT, FITRNREFERENCE, TRNCODE, 
    STATUS, CUSTTRNREF, ORIGAMOUNT, DAYFLOATAMT0, DAYFLOATAMT1, DAYFLOATAMT2, SUPPLEMENTARYDET, 
    UPDTBALAMOUNT, ADDITIONALREF, ISMEMOTRN, POSTEDDTTM__, UPDATEDTTM, UPDATEUSER, VERSIONSTAMP, BNKCOMMITMENTKY, BNKSUBCOMMITMENTKY
  </sql>

  	<sql id="Wrapper_Top_Pagination_SQL">
		select pg.* from ( select temp.*, SUM(1) over() cnt, row_number() 
		over(ORDER BY 
    	<if test="loanAccountCriteria.orderBy == null" >
    		BNKLOANAcctTRN.POSTEDDTTM desc
    	</if>
		<if test="loanAccountCriteria.orderBy != null" >
    		${loanAccountCriteria.orderBy} 
    	</if>
    	<if test="loanAccountCriteria.orderBy != null and  loanAccountCriteria.sortOrder !=null">
    		${loanAccountCriteria.sortOrder} 
    	</if>
		) rownumber_ from
		(
	</sql>
	<sql id="Wrapper_Bottom_Pagination_SQL">
		)temp )pg
		where pg.rownumber_ <![CDATA[ >= ]]> #{fromRowNum} and pg.rownumber_ <![CDATA[ <= ]]> #{toRowNum}
	</sql>
  
  <select id="selectloanTransaction" resultMap="BaseResultMap" parameterType="com.s1.common.transact.model.LoanAccountTransactionCriteria" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 18 11:43:06 IST 2014.
    -->
    <include refid="Wrapper_Top_Pagination_SQL" />
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    from BNKLOANACCTTRN
    where
   <if test="loanAccountCriteria.accountOid != null" >
      BNKACCTKY = #{loanAccountCriteria.accountOid,jdbcType=BIGINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
    </if>
    <if test="loanAccountCriteria.fromDate != null" >
		AND BNKLOANAcctTRN.POSTEDDTTM <![CDATA[ >= ]]> #{loanAccountCriteria.fromDate,jdbcType=TIMESTAMP}
  	</if>
  	<if test="loanAccountCriteria.toDate != null" >
		AND BNKLOANAcctTRN.POSTEDDTTM <![CDATA[ <= ]]> #{loanAccountCriteria.toDate,jdbcType=TIMESTAMP}
  	</if>
  	<if test="loanAccountCriteria.isPDorCD != null" >
        AND BNKLOANAcctTRN.ISMEMOTRN = #{loanAccountCriteria.isCDData,jdbcType=CHAR,typeHandler=com.s1.arch.ibatis.ZeroOneBooleanTypeHandler}
    </if>
    <if test="loanAccountCriteria.fromAmount != null" >
        AND BNKLOANAcctTRN.TRNAMOUNT <![CDATA[ >= ]]> #{loanAccountCriteria.fromAmount,jdbcType=DECIMAL}
    </if>
    <if test="loanAccountCriteria.toAmount != null" >
        AND BNKLOANAcctTRN.TRNAMOUNT <![CDATA[ <= ]]> #{loanAccountCriteria.toAmount,jdbcType=DECIMAL}
    </if>
        
    <if test="loanAccountCriteria.fromCheckNum != null" >
        AND Cast(Cast( Translate(BNKLOANACCTTRN.CUSTTRNREF,'000000000000000000000000000000000000000000000000000',
                 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$%^*()_+-,.;: ','0')
                  AS VARCHAR(31)) as decimal(31,0)) <![CDATA[ >= ]]> cast(#{loanAccountCriteria.fromCheckNum,jdbcType=VARCHAR} as decimal(31,0))
    </if>
    <if test="loanAccountCriteria.toCheckNum != null" >
        AND Cast(Cast( Translate(BNKLOANACCTTRN.CUSTTRNREF,'000000000000000000000000000000000000000000000000000',
                 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$%^*()_+-,.;: ','0')
                  AS VARCHAR(31)) as decimal(31,0)) <![CDATA[ <= ]]> cast(#{loanAccountCriteria.toCheckNum,jdbcType=VARCHAR}  as decimal(31,0))
    </if>
    <if test="loanAccountCriteria.accNoteKy != null" >
        AND  BNKLOANAcctTRN.BNKACCTNOTEKY = #{loanAccountCriteria.accNoteKy,jdbcType=BIGINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler} 
    </if>
    <if test="loanAccountCriteria.accCommitmentKy != null" >
        AND  BNKLOANAcctTRN.BNKCommitmentKy = #{loanAccountCriteria.accCommitmentKy,jdbcType=BIGINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler} 
    </if>
    <if test="loanAccountCriteria.accSubCommitmentKy != null" >
        AND  BNKLOANAcctTRN.BNKSubCommitmentKy = #{loanAccountCriteria.accSubCommitmentKy,jdbcType=BIGINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler} 
    </if>
    <if test="loanAccountCriteria.acctTransOnly == true" >
        AND BNKLOANAcctTRN.bnkacctnoteky IS NULL AND BNKLOANAcctTRN.BNKCommitmentKy IS NULL AND BNKLOANAcctTRN.BNKSubCommitmentKy IS NULL 
    </if>
    <if test="loanAccountCriteria.rowsToFetch > 0" >
            fetch first ${loanAccountCriteria.rowsToFetch} rows only 
    </if>   
    <include refid="Wrapper_Bottom_Pagination_SQL" />
  </select> 
  
  <select id="selectloanTransaction-Oracle" resultMap="BaseResultMap" parameterType="com.s1.common.transact.model.LoanAccountTransactionCriteria" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 18 11:43:06 IST 2014.
    -->
    
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    from BNKLOANACCTTRN
    where
   <if test="loanAccountCriteria.accountOid != null" >
      BNKACCTKY = #{loanAccountCriteria.accountOid,jdbcType=BIGINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler}
    </if>
    <if test="loanAccountCriteria.fromDate != null" >
		AND BNKLOANAcctTRN.POSTEDDTTM <![CDATA[ >= ]]> #{loanAccountCriteria.fromDate,jdbcType=TIMESTAMP}
  	</if>
  	<if test="loanAccountCriteria.toDate != null" >
		AND BNKLOANAcctTRN.POSTEDDTTM <![CDATA[ <= ]]> #{loanAccountCriteria.toDate,jdbcType=TIMESTAMP}
  	</if>
  	<if test="loanAccountCriteria.isPDorCD != null" >
        AND BNKLOANAcctTRN.ISMEMOTRN = #{loanAccountCriteria.isCDData,jdbcType=CHAR,typeHandler=com.s1.arch.ibatis.ZeroOneBooleanTypeHandler}
    </if>
    <if test="loanAccountCriteria.fromAmount != null" >
        AND BNKLOANAcctTRN.TRNAMOUNT <![CDATA[ >= ]]> #{loanAccountCriteria.fromAmount,jdbcType=DECIMAL}
    </if>
    <if test="loanAccountCriteria.toAmount != null" >
        AND BNKLOANAcctTRN.TRNAMOUNT <![CDATA[ <= ]]> #{loanAccountCriteria.toAmount,jdbcType=DECIMAL}
    </if>
        
    <if test="loanAccountCriteria.fromCheckNum != null" >
        AND Cast(Cast( Translate(BNKLOANACCTTRN.CUSTTRNREF,'000000000000000000000000000000000000000000000000000',
                 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$%^*()_+-,.;: ','0')
                  AS VARCHAR(31)) as decimal(31,0)) <![CDATA[ >= ]]> cast(#{loanAccountCriteria.fromCheckNum,jdbcType=VARCHAR} as decimal(31,0))
    </if>
    <if test="loanAccountCriteria.toCheckNum != null" >
        AND Cast(Cast( Translate(BNKLOANACCTTRN.CUSTTRNREF,'000000000000000000000000000000000000000000000000000',
                 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$%^*()_+-,.;: ','0')
                  AS VARCHAR(31)) as decimal(31,0)) <![CDATA[ <= ]]> cast(#{loanAccountCriteria.toCheckNum,jdbcType=VARCHAR}  as decimal(31,0))
    </if>
    <if test="loanAccountCriteria.accNoteKy != null" >
        AND  BNKLOANAcctTRN.BNKACCTNOTEKY = #{loanAccountCriteria.accNoteKy,jdbcType=BIGINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler} 
    </if>
    <if test="loanAccountCriteria.accCommitmentKy != null" >
        AND  BNKLOANAcctTRN.BNKCommitmentKy = #{loanAccountCriteria.accCommitmentKy,jdbcType=BIGINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler} 
    </if>
    <if test="loanAccountCriteria.accSubCommitmentKy != null" >
        AND  BNKLOANAcctTRN.BNKSubCommitmentKy = #{loanAccountCriteria.accSubCommitmentKy,jdbcType=BIGINT,typeHandler=com.s1.arch.ibatis.ObjectIdTypeHandler} 
    </if>
    <if test="loanAccountCriteria.acctTransOnly == true" >
        AND BNKLOANAcctTRN.bnkacctnoteky IS NULL AND BNKLOANAcctTRN.BNKCommitmentKy IS NULL AND BNKLOANAcctTRN.BNKSubCommitmentKy IS NULL 
     </if> 
    <if test="loanAccountCriteria.rowsToFetch > 0" >
      and ROWNUM &lt;=${loanAccountCriteria.rowsToFetch}
    </if>   
    <if test="loanAccountCriteria.orderBy != null" >
    	ORDER BY ${loanAccountCriteria.orderBy} 
    </if>
    <if test="loanAccountCriteria.orderBy != null and  loanAccountCriteria.sortOrder !=null">
    	${loanAccountCriteria.sortOrder} 
    </if> 
  </select> 

</mapper>